"use strict";(self["webpackChunkvue_vieew"]=self["webpackChunkvue_vieew"]||[]).push([[770],{7770:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var l=function(){var t=this,e=t._self._c;return e("div",[e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[t._v("文章列表")])]),e("el-form",{ref:"artForm",staticClass:"demo-form-inline",attrs:{inline:!0}},[e("el-form-item",{attrs:{label:"文章分类"}},[e("el-select",{attrs:{placeholder:"请选择分类"},model:{value:t.page.cate_name,callback:function(e){t.$set(t.page,"cate_name",e)},expression:"page.cate_name"}},t._l(t.allArticleCate,(function(t){return e("el-option",{key:t.cate_name,attrs:{label:t.cate_name,value:t.cate_name}})})),1)],1),e("el-form-item",{attrs:{label:"发布状态","label-width":"150px"}},[e("el-select",{attrs:{placeholder:"请选择状态"},model:{value:t.page.state,callback:function(e){t.$set(t.page,"state",e)},expression:"page.state"}},[e("el-option",{attrs:{label:"已发布",value:"已发布"}}),e("el-option",{attrs:{label:"草稿",value:"草稿"}})],1)],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.filterArticle}},[t._v("筛选")]),e("el-button",{attrs:{type:"info"},on:{click:t.resetArticle}},[t._v("重置")])],1),e("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.showDialog}},[t._v("发表文章")])],1),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.allArticle,stripe:!0,border:!0}},[e("el-table-column",{attrs:{label:"文章标题",prop:"title"}}),e("el-table-column",{attrs:{prop:"cate_name",label:"分类"}}),e("el-table-column",{attrs:{prop:"pub_date",label:"发表时间"}}),e("el-table-column",{attrs:{label:"状态",prop:"state"}}),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.dialogArticle(a.row)}}},[t._v("查看")]),e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.open(a.row)}}},[t._v("删除")])]}}])})],1),e("el-pagination",{attrs:{"current-page":t.page.pagenum,"page-sizes":10,"page-size":t.page.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.Toto},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),e("el-dialog",{attrs:{title:"文章预览",visible:t.dialogVisible1,width:"80%"},on:{"update:visible":function(e){t.dialogVisible1=e}}},[e("div",{staticClass:"title"},[t._v(t._s(this.art_dailit.title))]),e("div",{staticClass:"describe"},[e("span",[t._v("作者:"+t._s(this.art_dailit.username)+" ")]),e("span",[t._v("发布时间: "+t._s(this.art_dailit.pub_date))]),e("span",[t._v("所属分类: "+t._s(this.art_dailit.cate_name))]),e("span",[t._v("状态:"+t._s(this.art_dailit.state)+" ")])]),e("el-divider"),e("div",{domProps:{innerHTML:t._s(this.art_dailit.content)}}),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible1=!1}}},[t._v("确 定")])],1)],1),e("el-dialog",{attrs:{fullscreen:"",center:"",title:"发表文章",visible:t.dialogFormVisible,"before-close":t.handleClose},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.dialogClose}},[e("el-form",{ref:"form",attrs:{model:t.tableData,rules:t.rules}},[e("el-form-item",{attrs:{label:"文章标题","label-width":t.formLabelWidth,prop:"title"}},[e("el-input",{attrs:{autocomplete:"off",placeholder:"请输入标题"},model:{value:t.tableData.title,callback:function(e){t.$set(t.tableData,"title",e)},expression:"tableData.title"}})],1),e("el-form-item",{attrs:{label:"文章分类","label-width":t.formLabelWidth,prop:"cate_id"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择分类"},model:{value:t.tableData.cate_name,callback:function(e){t.$set(t.tableData,"cate_name",e)},expression:"tableData.cate_name"}},t._l(t.allArticleCate,(function(t){return e("el-option",{key:t.cate_name,attrs:{label:t.cate_name,value:t.cate_name}})})),1)],1),e("el-form-item",{staticStyle:{display:"flex","margin-left":"10px"},attrs:{label:"文章内容",prop:"content"}},[e("quill-editor",{on:{blur:function(t){}},model:{value:t.tableData.content,callback:function(e){t.$set(t.tableData,"content",e)},expression:"tableData.content"}})],1)],1),e("div",{staticStyle:{display:"flex"},attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticStyle:{"margin-left":"80px"},attrs:{type:"primary"},on:{click:function(e){return t.send()}}},[t._v("发布")]),e("el-button",{attrs:{type:"info"},on:{click:function(e){return t.send2()}}},[t._v("存为草稿")])],1)],1)],1)},i=[],s=a(2567),o={data(){return{allArticleCate:[],allArticle:[],formLabelWidth:"80px",page:{pagenum:1,pagesize:10,cate_name:"",state:"",username:localStorage.getItem("token")},dialogFormVisible:!1,dialogVisible1:!1,tableData:{title:"",cate_id:"",cate_name:"",content:"",username:localStorage.getItem("token"),state:""},art_dailit:{},Toto:null}},mounted(){(0,s.RO)(localStorage.getItem("token")).then((t=>{this.allArticleCate=t.data})),(0,s.s4)(this.page).then((t=>{console.log(t.data),this.Toto=t.data.length,this.allArticle=t.data}))},methods:{handleCurrentChange(t){console.log(t),this.page.pagenum=t,(0,s.s4)(this.page).then((t=>{console.log(t.data),this.Toto=t.data.length,this.allArticle=t.data}))},handleSizeChange(t){console.log(t),this.page.pagenum=1,this.page.pagesize=t,(0,s.s4)(this.page).then((t=>{console.log(t.data),this.Toto=t.data.length,this.allArticle=t.data}))},showDialog(){this.dialogFormVisible=!0},dialogClose(){this.$refs.form.resetFields()},handleClose(t){this.$confirm("此操作将导致文章信息丢失, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{t()})).catch()},send(){this.tableData.state="已发布",(0,s.mQ)(this.tableData).then((t=>{200==t.data.code&&((0,s.s4)(this.page).then((t=>{console.log(t.data),this.Toto=t.data.length,this.allArticle=t.data})),this.tableData.cate_name="",this.dialogFormVisible=!1)}))},send2(){this.tableData.state="草稿",(0,s.mQ)(this.tableData).then((t=>{200==t.data.code&&((0,s.s4)(this.page).then((t=>{console.log(t.data),this.Toto=t.data.length,this.allArticle=t.data})),this.tableData.cate_name="",this.dialogFormVisible=!1)}))},open({_id:t}){this.$confirm("此操作将永久删除该条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{(0,s.z9)({_id:t}).then((t=>{console.log(t.data),200==t.data.code&&((0,s.s4)(this.page).then((t=>{console.log(t.data),this.Toto=t.data.length,this.allArticle=t.data})),this.$message({type:"success",message:"删除成功!"}))}))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},dialogArticle({_id:t}){this.dialogVisible1=!0,(0,s.pi)({_id:t}).then((t=>{this.art_dailit=t.data[0]}))},filterArticle(){this.page.pagenum=1,(0,s.s4)(this.page).then((t=>{console.log(t.data),console.log(t.data.length),this.Toto=t.data.length,this.allArticle=t.data}))},resetArticle(){this.page.cate_name="",this.page.state="",this.page.pagenum=1,(0,s.s4)(this.page).then((t=>{console.log(t.data),this.Toto=t.data.length,this.allArticle=t.data}))}}},n=o,r=a(1001),c=(0,r.Z)(n,l,i,!1,null,"6bed6fd8",null),d=c.exports}}]);
//# sourceMappingURL=770.4cfe67cd.js.map